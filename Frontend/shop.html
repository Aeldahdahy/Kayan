<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>Shop || Aivons || HTML Template For Business</title>
	<!-- favicons Icons -->
	<link rel="apple-touch-icon" sizes="180x180" href="assets/images/favicons/apple-touch-icon.png" />
	<link rel="icon" type="image/png" sizes="32x32" href="assets/images/favicons/favicon-32x32.png" />
	<link rel="icon" type="image/png" sizes="16x16" href="assets/images/favicons/favicon-16x16.png" />
	<link rel="manifest" href="assets/images/favicons/site.webmanifest" />
	<meta name="description" content="Aivons HTML Template For Business Consulting" />

	<!-- fonts -->
	<link rel="preconnect" href="https://fonts.gstatic.com">
	<link
		href="https://fonts.googleapis.com/css2?family=Jost:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
		rel="stylesheet">


	<link rel="stylesheet" href="assets/vendors/bootstrap/css/bootstrap.min.css" />
	<link rel="stylesheet" href="assets/vendors/animate/animate.min.css" />
	<link rel="stylesheet" href="assets/vendors/fontawesome/css/all.min.css" />
	<link rel="stylesheet" href="assets/vendors/jarallax/jarallax.css" />
	<link rel="stylesheet" href="assets/vendors/jquery-magnific-popup/jquery.magnific-popup.css" />
	<link rel="stylesheet" href="assets/vendors/nouislider/nouislider.min.css" />
	<link rel="stylesheet" href="assets/vendors/nouislider/nouislider.pips.css" />
	<link rel="stylesheet" href="assets/vendors/odometer/odometer.min.css" />
	<link rel="stylesheet" href="assets/vendors/swiper/swiper.min.css" />
	<link rel="stylesheet" href="assets/vendors/aivons-icons/style.css">
	<link rel="stylesheet" href="assets/vendors/tiny-slider/tiny-slider.min.css" />
	<link rel="stylesheet" href="assets/vendors/reey-font/stylesheet.css" />
	<link rel="stylesheet" href="assets/vendors/owl-carousel/owl.carousel.min.css" />
	<link rel="stylesheet" href="assets/vendors/owl-carousel/owl.theme.default.min.css" />
	<link rel="stylesheet" href="assets/vendors/twentytwenty/twentytwenty.css" />
	<link rel="stylesheet" href="assets/vendors/bxslider/css/jquery.bxslider.css" />
	<!-- template styles -->
	<link rel="stylesheet" href="assets/css/aivons.css" />
	<link rel="stylesheet" href="assets/css/aivons-responsive.css" />

	<!-- RTL Styles -->
	<link rel="stylesheet" href="assets/css/aivons-rtl.css">

	<!-- color css -->
	<link rel="stylesheet" id="jssDefault" href="assets/css/colors/color-default.css">
	<link rel="stylesheet" id="jssMode" href="assets/css/modes/aivons-normal.css">

	<!-- toolbar css -->
	<link rel="stylesheet" href="assets/css/aivons-toolbar.css">
</head>

<body>



	<div class="preloader">
		<div class="preloader__image"></div><!-- /.preloader__image -->
	</div>
	<!-- /.preloader -->
	<div class="page-wrapper">
		<header class="main-header clearfix">
			<nav class="main-menu clearfix">
				<div class="main-menu-wrapper clearfix">
					<div class="main-menu-wrapper__left">
						<div class="main-menu-wrapper__logo">
							<a href="index.html"><img src="assets/images/logo-1.png" alt=""></a>
						</div>
						<div class="main-menu-wrapper__main-menu">
							<a href="#" class="mobile-nav__toggler">
								<span class="mobile-nav__toggler-bar"></span>
								<span class="mobile-nav__toggler-bar"></span>
								<span class="mobile-nav__toggler-bar"></span>
							</a>
							<ul class="main-menu__list">
								<li class="dropdown  ">
									<a href="index.html">Home</a>
									<ul>
										<li>
											<a href="index.html">Home One</a>
										</li>
										<li><a href="index2.html">Home Two</a></li>
										<li><a href="index3.html">Home Three</a></li>
										<li><a href="index-one-page.html">Home One Page</a></li>
										<li class="dropdown">
											<a href="#">Header Styles</a>
											<ul>
												<li><a href="index.html">Header One</a></li>
												<li><a href="index.html">Header Two</a></li>
												<li><a href="index.html">Header Three</a></li>
											</ul>
										</li>
									</ul>
								</li>
								<li class="dropdown">
									<a href="services.html">Services</a>
									<ul>
										<li><a href="services.html">Services</a></li>
										<li><a href="services2.html">Services Two</a></li>
										<li><a href="audit-marketing.html">Audit Marketing</a></li>
										<li><a href="banking-advising.html">Banking Advising</a></li>
										<li><a href="business-growth.html">Business Growth</a></li>
										<li><a href="consumer-product.html">Consumer Product</a></li>
										<li><a href="financial-advice.html">Financial Advice</a></li>
										<li><a href="marketing-rule.html">Marketing Rule</a></li>
									</ul>
								</li>
								<li class="dropdown">
									<a href="#">Pages</a>
									<ul>
										<li><a href="about.html">About</a></li>
										<li><a href="team.html">Team</a></li>
										<li><a href="testimonials.html">Testimonials</a></li>
										<li><a href="faq.html">FAQS</a></li>
										<li><a href="404.html">404</a></li>
									</ul>
								</li>
								<li class="dropdown">
									<a href="cases.html">Cases</a>
									<ul>
										<li><a href="cases.html">Cases</a></li>
										<li><a href="cases-details.html">Cases Details</a></li>
									</ul>
								</li>
								<li class="dropdown">
									<a href="shop.html">Shop</a>
									<ul>
										<li><a href="shop.html">Products</a></li>
										<li><a href="product-details.html">Product Details</a></li>
										<li><a href="cart.html">Cart</a></li>
										<li><a href="checkout.html">Checkout</a></li>
									</ul>
								</li>
								<li class="dropdown">
									<a href="blog-sidebar.html">Blog</a>
									<ul>
										<li><a href="blog.html">Blog</a></li>
										<li><a href="blog-sidebar.html">Blog Sidebar</a></li>
										<li><a href="blog-details.html">Blog Details</a></li>
									</ul>
								</li>
								<li><a href="contact.html">Contact</a></li>
							</ul>
						</div>
					</div>
					<div class="main-menu-wrapper__right">
						<div class="main-menu-wrapper__social-box">
							<div class="main-menu-wrapper__social">
								<a href="#"><i class="fab fa-twitter"></i></a>
								<a href="#" class="clr-fb"><i class="fab fa-facebook"></i></a>
								<a href="#" class="clr-dri"><i class="fab fa-dribbble"></i></a>
								<a href="#" class="clr-ins"><i class="fab fa-instagram"></i></a>
							</div>
						</div>
						<div class="main-menu-wrapper__search-box">
							<a href="#" class="main-menu-wrapper__search search-toggler icon-magnifying-glass1"></a>
						</div>
						<div class="main-menu-wrapper__phone-contact">
							<p>Need help? Talk to an expert</p>
							<a href="tel:+92-666-888-0000">+92 666 888 0000</a>
						</div>
					</div>
				</div>
			</nav>
		</header>

		<div class="stricky-header stricked-menu main-menu">
			<div class="sticky-header__content"></div><!-- /.sticky-header__content -->
		</div><!-- /.stricky-header -->

		<!--Page Header Start-->
		<section class="page-header">
			<div class="page-header__bg"></div><!-- /.page-header__bg -->
			<div class="page-header-shape-1"></div><!-- /.page-header-shape-1 -->
			<div class="page-header-shape-2"></div><!-- /.page-header-shape-2 -->
			<div class="page-header-shape-3"></div><!-- /.page-header-shape-3 -->
			<div class="container">
				<div class="page-header__inner">
					<ul class="thm-breadcrumb list-unstyled">
						<li><a href="index.html">Home</a></li>
						<li><span>/</span></li>
						<li>Shop</li>
					</ul>
					<h2>Shop</h2>
				</div>
			</div>
		</section>
		<!--Page Header End-->




		<section class="shop-one">
			<div class="container">
				<div class="row">

					<div class="col-lg-3">
						<div class="shop-one__sidebar">
							<div class="shop-one__sidebar__item shop-one__sidebar__search">
								<form action="#">
									<input type="text" id="search-input" placeholder="Search for products..." />
									<button type="submit" id="search-button"><i class=" icon-magnifying-glass1 "></i></button>
								</form>

							</div><!-- /.shop-one__sidebar__item -->

							<div class="shop-one__sidebar__item shop-one__sidebar__category filters">
								<h3 class="shop-one__sidebar__item__title">Brands</h3>
								<ul class="list-unstyled shop-one__sidebar__Brand__list">

									<select class="shop-one__product-sorter" name="" id="brandDropdown">
										<option value="">Select a brand</option>
									</select>
								</ul>
								<br>

								<h3 class="shop-one__sidebar__item__title">Categories</h3>
								<ul class="list-unstyled shop-one__sidebar__category__list">
									<!-- Categories and subcategories will be dynamically added here -->
								</ul>
							</div><!-- /.shop-one__sidebar__item -->


						</div><!-- /.shop-one__sidebar -->
					</div><!-- /.col-lg-3 -->
					<div class="col-lg-9">
						<div class="row" id="product-container">
							<!-- Product cards will be dynamically inserted here -->
						</div><!-- /.row -->
					</div><!-- /.col-lg-9 -->
				</div><!-- /.row -->
			</div><!-- /.container -->

			<!-- pagination -->
			<div class="pagination-wrapper">
				<ul class="pagination">
					<li class="page-item"><a href="#" class="page-link">Previous</a></li>
					<li class="page-item"><a href="#" class="page-link">1</a></li>
					<li class="page-item"><a href="#" class="page-link">2</a></li>
					<li class="page-item"><a href="#" class="page-link">3</a></li>
					<li class="page-item"><a href="#" class="page-link">Next</a></li>
				</ul>
			</div>
			<!-- ---------- -->

		</section><!-- /.shop-one -->


		<!--Site Footer One Start-->
		<footer class="site-footer">
			<div class="site-footer-shape wow slideInRight" data-wow-delay="100ms" data-wow-duration="3500ms"
				style="background-image: url(assets/images/shapes/footer-shape.png)"></div>
			<div class="container">
				<div class="site-footer__top">
					<div class="row">
						<div class="col-xl-4 col-lg-6 col-md-6 wow fadeInUp" data-wow-delay="100ms">
							<div class="footer-widget__column footer-widget__about">
								<div class="footer-widget__about-logo">
									<a href="index.html"><img src="assets/images/footer-logo.png" alt=""></a>
								</div>
								<p class="footer-widget__text">Welcome to our consultancy agency. Lore ipsum simply text
									amet cing elit.</p>
								<ul class="list-unstyled footer-widget__contact-list">
									<li>
										<div class="icon">
											<i class="fas fa-phone-square-alt"></i>
										</div>
										<div class="text">
											<p><a href="tel:+92-666-888-0000">+92 666 888 0000</a></p>
										</div>
									</li>
									<li>
										<div class="icon">
											<i class="fas fa-envelope"></i>
										</div>
										<div class="text">
											<p><a href="mailto:needhelp@company.com">needhelp@company.com</a></p>
										</div>
									</li>
									<li>
										<div class="icon">
											<i class="fas fa-map-marker-alt"></i>
										</div>
										<div class="text">
											<p>66 Broklyn Street New York, USA</p>
										</div>
									</li>
								</ul>
							</div>
						</div>
						<div class="col-xl-3 col-lg-6 col-md-6 wow fadeInUp" data-wow-delay="200ms">
							<div class="footer-widget__column footer-widget__explore clearfix">
								<h3 class="footer-widget__title">Explore</h3>
								<ul class="footer-widget__explore-list list-unstyled">
									<li><a href="about.html">About</a></li>
									<li><a href="team.html">Meet our team</a></li>
									<li><a href="cases.html">Case stories</a></li>
									<li><a href="blog.html">Latest news</a></li>
									<li><a href="contact.html">Contact</a></li>
								</ul>
								<ul class="footer-widget__explore-list footer-widget__explore-list-two list-unstyled">
									<li><a href="contact.html">Support</a></li>
									<li><a href="faq.html">Terms of use</a></li>
									<li><a href="about.html">Privacy policy</a></li>
									<li><a href="faq.html">Help</a></li>
								</ul>
							</div>
						</div>
						<div class="col-xl-5 col-lg-6 col-md-8 wow fadeInUp" data-wow-delay="400ms">
							<div class="footer-widget__column footer-widget__newsletter">
								<h3 class="footer-widget__title footer-widget__title-news">Newsletter</h3>
								<form class="footer-widget__newsletter-form">
									<p class="footer-widget__newsletter-text">Subsrcibe for latest articles and
										resources</p>
									<div class="footer-widget__newsletter-input-box">
										<input type="email" placeholder="Email address" name="email">
										<button type="submit" class="footer-widget__newsletter-btn">Register</button>
									</div>
								</form>
							</div>
						</div>
					</div>
				</div>
				<div class="site-footer-bottom">
					<div class="row">
						<div class="col-xl-12">
							<div class="site-footer-bottom__inner">
								<div class="site-footer-bottom__left">
									<p>Â© Copyright 2021 by <a href="#">Layerdrops.com</a></p>
								</div>
								<div class="site-footer__social">
									<a href="#"><i class="fab fa-twitter"></i></a>
									<a href="#" class="clr-fb"><i class="fab fa-facebook"></i></a>
									<a href="#" class="clr-dri"><i class="fab fa-dribbble"></i></a>
									<a href="#" class="clr-ins"><i class="fab fa-instagram"></i></a>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</footer>
		<!--Site Footer One End-->


	</div><!-- /.page-wrapper -->


	<div class="mobile-nav__wrapper">
		<div class="mobile-nav__overlay mobile-nav__toggler"></div>
		<!-- /.mobile-nav__overlay -->
		<div class="mobile-nav__content">
			<span class="mobile-nav__close mobile-nav__toggler"><i class="fa fa-times"></i></span>

			<div class="logo-box">
				<a href="index.html" aria-label="logo image"><img src="assets/images/logo-1.png" width="155"
						alt="" /></a>
			</div>
			<!-- /.logo-box -->
			<div class="mobile-nav__container"></div>
			<!-- /.mobile-nav__container -->

			<ul class="mobile-nav__contact list-unstyled">
				<li>
					<i class="fa fa-envelope"></i>
					<a href="mailto:needhelp@packageName__.com">needhelp@aivons.com</a>
				</li>
				<li>
					<i class="fa fa-phone-alt"></i>
					<a href="tel:666-888-0000">666 888 0000</a>
				</li>
			</ul><!-- /.mobile-nav__contact -->
			<div class="mobile-nav__top">
				<div class="mobile-nav__social">
					<a href="#" class="fab fa-twitter"></a>
					<a href="#" class="fab fa-facebook-square"></a>
					<a href="#" class="fab fa-pinterest-p"></a>
					<a href="#" class="fab fa-instagram"></a>
				</div><!-- /.mobile-nav__social -->
			</div><!-- /.mobile-nav__top -->



		</div>
		<!-- /.mobile-nav__content -->
	</div>
	<!-- /.mobile-nav__wrapper -->

	<div class="search-popup">
		<div class="search-popup__overlay search-toggler"></div>
		<!-- /.search-popup__overlay -->
		<div class="search-popup__content">
			<form action="#">
				<label for="search" class="sr-only">search here</label><!-- /.sr-only -->
				<input type="text" id="search" placeholder="Search Here..." />
				<button type="submit" aria-label="search submit" class="thm-btn">
					<i class="icon-magnifying-glass"></i>
				</button>
			</form>
		</div>
		<!-- /.search-popup__content -->
	</div>
	<!-- /.search-popup -->

	<a href="#" data-target="html" class="scroll-to-target scroll-to-top"><i class="fa fa-angle-up"></i></a>


	<script src="assets/vendors/jquery/jquery-3.5.1.min.js"></script>
	<script src="assets/vendors/bootstrap/js/bootstrap.bundle.min.js"></script>
	<script src="assets/vendors/jarallax/jarallax.min.js"></script>
	<script src="assets/vendors/jquery-ajaxchimp/jquery.ajaxchimp.min.js"></script>
	<script src="assets/vendors/jquery-appear/jquery.appear.min.js"></script>
	<script src="assets/vendors/jquery-circle-progress/jquery.circle-progress.min.js"></script>
	<script src="assets/vendors/jquery-magnific-popup/jquery.magnific-popup.min.js"></script>
	<script src="assets/vendors/jquery-validate/jquery.validate.min.js"></script>
	<script src="assets/vendors/nouislider/nouislider.min.js"></script>
	<script src="assets/vendors/odometer/odometer.min.js"></script>
	<script src="assets/vendors/swiper/swiper.min.js"></script>
	<script src="assets/vendors/tiny-slider/tiny-slider.min.js"></script>
	<script src="assets/vendors/wnumb/wNumb.min.js"></script>
	<script src="assets/vendors/wow/wow.js"></script>
	<script src="assets/vendors/isotope/isotope.js"></script>
	<script src="assets/vendors/countdown/countdown.min.js"></script>
	<script src="assets/vendors/owl-carousel/owl.carousel.min.js"></script>
	<script src="assets/vendors/twentytwenty/twentytwenty.js"></script>
	<script src="assets/vendors/twentytwenty/jquery.event.move.js"></script>
	<script src="assets/vendors/bxslider/js/jquery.bxslider.min.js"></script>


	<script src="http://maps.google.com/maps/api/js?key=AIzaSyATY4Rxc8jNvDpsK8ZetC7JyN4PFVYGCGM"></script>


	<!-- template js -->
	<script src="assets/js/aivons.js"></script>


	<script>
		const API_BASE = "http://localhost:2000/public";
			const IMAGE_BASE = "http://localhost:2000";
		
			const isShopPage = () => window.location.pathname.includes('shop.html');
		
			const updateQueryParams = (paramsToUpdate, removeParams = []) => {
				const urlParams = new URLSearchParams(window.location.search);
		
					for (const key in paramsToUpdate) {
						urlParams.set(key, paramsToUpdate[key]);
					}

					removeParams.forEach((param) => urlParams.delete(param));

					const newURL = `${window.location.pathname}?${urlParams.toString()}`;
					window.history.replaceState(null, '', newURL);
				};

				const resetToMainURLIfNeeded = () => {
					if (isShopPage()) {
						const urlParams = new URLSearchParams(window.location.search);
						const hasFilters =
							urlParams.get('brand_id') ||
							urlParams.get('sub_category_id') ||
							urlParams.get('category_id') ||
							urlParams.get('search');

						if (!hasFilters) {
							window.history.replaceState(null, '', window.location.pathname);
						}
					}
				};

				let allProducts = [];
				let productsPerPage = 9;
				let currentPage = 1;

				const fetchProducts = () => {
					if (!isShopPage()) return;

					const urlParams = new URLSearchParams(window.location.search);
					const brand_id = urlParams.get('brand_id');
					const sub_category_id = urlParams.get('sub_category_id');
					const category_id = urlParams.get('category_id');
					const search = urlParams.get('search');

					let filter = {};
					if (brand_id) filter.brand_id = brand_id;
					if (sub_category_id) filter.sub_category_id = sub_category_id;
					if (category_id) filter.category_id = category_id;
					if (search) filter.search = search;

					let url = `${API_BASE}/searchClientProductEn`;
					const params = new URLSearchParams(filter);

					if (params.toString()) {
						url += `?${params.toString()}`;
					}

					fetch(url)
				.then((response) => response.json())
				.then((data) => {
					const productContainer = document.getElementById('product-container');
					productContainer.innerHTML = '';

					if (data.products && data.products.length > 0) {
						allProducts = deduplicateProducts(data.products);
						renderProducts();
						renderPagination();
					} else {
						productContainer.innerHTML = '<p>No products found for the selected filters.</p>';
						document.querySelector('.pagination-wrapper').style.display = 'none';
					}
				})
							.catch((error) => {
								console.error('Error fetching products:', error);
								document.getElementById('product-container').innerHTML = '<p>Error fetching products.</p>';
							});
					};
				
			const deduplicateProducts = (products) => {
				const uniqueProducts = [];
				const productIds = new Set();

				products.forEach((product) => {
					if (!productIds.has(product.product_id)) {
						productIds.add(product.product_id);
						uniqueProducts.push(product);
					}
				});

				return uniqueProducts;
			};

			const renderProducts = () => {
				const productContainer = document.getElementById('product-container');
			productContainer.innerHTML = '';
			
			const start = (currentPage - 1) * productsPerPage;
			const end = start + productsPerPage;
			const productsToRender = allProducts.slice(start, end);
			
			productsToRender.forEach((product) => {
				const discountBadge =
					product.product_sale > 0
						? `<span class="shop-one__sale">${product.product_sale}% Off</span>`
						: '';
			
				const productCard = `
					<div class="col-md-6 col-lg-4">
						<div class="shop-one__item">
							<div class="shop-one__image">
								${discountBadge}
								<img src="${IMAGE_BASE}${product.product_image}" alt="${product.product_name}">
								<a href="product-details.html?product_id=${product.product_id}" class="thm-btn shop-one__cart">
									More Details!
								</a>
							</div>
							<div class="shop-one__content text-center">
								<h3 class="shop-one__title">
									<a href="product-details.html?product_id=${product.product_id}">${product.product_name}</a>
								</h3>
								<p>${product.product_description}</p>
							</div>
						</div>
					</div>
				`;

				productContainer.innerHTML += productCard;
			});
		};
	
			const renderPagination = () => {
				const paginationContainer = document.querySelector('.pagination');
			paginationContainer.innerHTML = '';
			
			const totalPages = Math.ceil(allProducts.length / productsPerPage);
			
			if (totalPages <= 1) {
				document.querySelector('.pagination-wrapper').style.display = 'none';
				return;
			} else {
				document.querySelector('.pagination-wrapper').style.display = 'block';
			}

			const prevPageItem = document.createElement('li');
			prevPageItem.classList.add('page-item');
			if (currentPage === 1) prevPageItem.classList.add('disabled');
			prevPageItem.innerHTML = `<a href="#" class="page-link">Previous</a>`;
			prevPageItem.addEventListener('click', (e) => {
				e.preventDefault();
				if (currentPage > 1) {
					currentPage--;
					renderProducts();
					renderPagination();
				}
			});
			paginationContainer.appendChild(prevPageItem);
					
			for (let i = 1; i <= totalPages; i++) {
				const pageItem = document.createElement('li');
				pageItem.classList.add('page-item');
				if (i === currentPage) pageItem.classList.add('active');
				pageItem.innerHTML = `<a href="#" class="page-link">${i}</a>`;
				pageItem.addEventListener('click', (e) => {
					e.preventDefault();
					currentPage = i;
					renderProducts();
					renderPagination();
				});
				paginationContainer.appendChild(pageItem);
			}
					
			const nextPageItem = document.createElement('li');
			nextPageItem.classList.add('page-item');
			if (currentPage === totalPages) nextPageItem.classList.add('disabled');
			nextPageItem.innerHTML = `<a href="#" class="page-link">Next</a>`;
			nextPageItem.addEventListener('click', (e) => {
				e.preventDefault();
				if (currentPage < totalPages) {
					currentPage++;
					renderProducts();
					renderPagination();
				}
			});
							paginationContainer.appendChild(nextPageItem);
						};
					
			const fetchBrands = () => {
			const brandDropdown = document.getElementById('brandDropdown');
			const urlParams = new URLSearchParams(window.location.search);
			const selectedBrand = urlParams.get('brand_id');

			fetch(`${API_BASE}/getClientBrand`)
				.then((response) => response.json())
				.then((data) => {
					brandDropdown.innerHTML = '<option value="">Select a brand</option>';

					data.brands.forEach((brand) => {
						const option = document.createElement('option');
						option.value = brand.brand_id;
						option.textContent = brand.brand_name;

						if (selectedBrand && selectedBrand === brand.brand_id) {
							option.selected = true;
						}
						
						brandDropdown.appendChild(option);
					});

					// Add "All Products" option
					const allProductsOption = document.createElement('option');
					allProductsOption.value = '';
					allProductsOption.textContent = 'All Products';
					if (!selectedBrand) allProductsOption.selected = true;
					brandDropdown.appendChild(allProductsOption);

					brandDropdown.addEventListener('change', () => {
						const brand_id = brandDropdown.value;
						updateQueryParams({ brand_id }, ['sub_category_id', 'category_id', 'search']);
						currentPage = 1;
						fetchProducts();
					});
				})
				.catch((error) => console.error('Error fetching brands:', error));
			};
		
			const fetchCategories = () => {
				fetch(`${API_BASE}/getClientEnglishCategoriesWithSubCategories`)
				.then((response) => response.json())
				.then((data) => {
					const categoryList = document.querySelector('.shop-one__sidebar__category__list');
					const urlParams = new URLSearchParams(window.location.search);
					const selectedCategory = urlParams.get('category_id');
					const selectedSubCategory = urlParams.get('sub_category_id');

					data.categories.forEach((category) => {
						const categoryItem = document.createElement('li');

						const categoryTitle = document.createElement('a');
						categoryTitle.textContent = category.category_name;
						categoryTitle.href = "#";
						categoryTitle.style.fontWeight = "bold";
						categoryTitle.style.display = "block";

						categoryTitle.addEventListener('click', (e) => {
							e.preventDefault();
							updateQueryParams({ category_id: category.category_id }, ['sub_category_id', 'brand_id', 'search']);
							currentPage = 1;
							fetchProducts();
						});
						categoryItem.appendChild(categoryTitle);
	
						if (category.subcategories && category.subcategories.length > 0) {
							const subCategoryDropdown = document.createElement('select');
							subCategoryDropdown.classList.add('shop-one__product-sorter');
						
							const defaultOption = document.createElement('option');
							defaultOption.value = "";
							defaultOption.textContent = "Select Subcategory";
							subCategoryDropdown.appendChild(defaultOption);
							
							category.subcategories.forEach((subCategory) => {
								const option = document.createElement('option');
								option.value = subCategory.sub_category_id;
								option.textContent = subCategory.sub_category_name;

								if (selectedSubCategory && selectedSubCategory === subCategory.sub_category_id) {
									option.selected = true;
								}

								subCategoryDropdown.appendChild(option);
							});
								
							subCategoryDropdown.addEventListener('change', () => {
								const sub_category_id = subCategoryDropdown.value;
								updateQueryParams({ sub_category_id }, ['category_id', 'brand_id', 'search']);
								currentPage = 1;
								fetchProducts();
							});

							categoryItem.appendChild(subCategoryDropdown);
						}
						
						categoryList.appendChild(categoryItem);
					});
				})
							.catch((error) => console.error('Error fetching categories:', error));
					};
				
			const initSearch = () => {
				const searchInput = document.getElementById('search-input');
			const searchForm = document.querySelector('.shop-one__sidebar__search form');

			searchForm.addEventListener('submit', (e) => {
				e.preventDefault();
				const searchTerm = searchInput.value.trim();
				updateQueryParams({ search: searchTerm }, ['brand_id', 'category_id', 'sub_category_id']);
				currentPage = 1;
				fetchProducts();
			});
				};
			
			const initPage = () => {
					resetToMainURLIfNeeded();
					fetchBrands();
					fetchCategories();
					fetchProducts();
					initSearch();
				};

				document.addEventListener('DOMContentLoaded', initPage);
	</script>
	
	
	

</body>

</html>